{% extends "newsapp/base.html" %}
{% load static %}

{% block content %}

<!-- üîç SEARCH BAR -->
<form method="get" action="" class="search-form">
    <input type="text" name="q" value="{{ search_query }}" class="search-input"
           placeholder="Search news headlines, technology, sports etc... üîç">
    <button type="submit" class="search-btn">Search</button>
</form>

<!-- ‚ùå No Results Found -->
{% if search_query and articles.paginator.count == 0 and api_news|length == 0 %}
<div class="no-results">
    <h3>üîç No Results Found</h3>
    <p>We couldn‚Äôt find anything for <strong>"{{ search_query }}"</strong>.</p>
    <a href="/" class="btn-main">Go Back Home</a>
</div>
{% endif %}

<!-- üì∞ HERO SECTION -->
<div class="hero-section">
    <h1>üì∞ Welcome to Yinhla Yerhu News App</h1>
    <p>Stay informed with trusted news worldwide in real time.</p>
    <a href="{% url 'all_news' %}" class="btn-main">Explore Latest News</a>
</div>

<!-- üè∑Ô∏è TOP CATEGORIES 
<h3 class="mt-4">üî• Top Categories</h3>
<div class="row mt-3">
    <div class="col-md-4 mb-4">
        <a href="?category=technology" class="text-decoration-none">
            <div class="category-card">
                <img src="https://img.icons8.com/external-others-amoghdesign/512/external-Technology.png"/>
                <h5>Technology</h5>
                <p>Latest tech and digital updates</p>
            </div>
        </a>
    </div>

    <div class="col-md-4 mb-4">
        <a href="?category=sports" class="text-decoration-none">
            <div class="category-card">
                <img src="https://img.icons8.com/color/96/trophy.png"/>
                <h5>Sports</h5>
                <p>Local & International Sports News</p>
            </div>
        </a>
    </div>

    <div class="col-md-4 mb-4">
        <a href="?sort=most_viewed" class="text-decoration-none">
            <div class="category-card">
                <img src="https://img.icons8.com/emoji/96/fire.png"/>
                <h5>Trending</h5>
                <p>News that everyone is talking about</p>
            </div>
        </a>
    </div>
</div>
-->
<!-- üîç SEARCH RESULTS SECTION (ONLY SHOW WHEN SEARCHING) -->
{% if search_query %}
<h3 class="mt-4">Search Results for: "{{ search_query }}"</h3>
<div class="row mt-3">

    <!-- Results From DB -->
    {% for article in articles %}
    <div class="col-md-4 mb-4">
        <div class="category-card">
            <h5>{{ article.title }}</h5>
            <p>{{ article.content|truncatewords:18 }}</p>
            <a href="{% url 'article_detail' article.id %}" class="btn-main">Read More</a>
        </div>
    </div>
    {% endfor %}

    <!-- Results from API News -->
    {% for item in api_news %}
    <div class="col-md-4 mb-4">
        <div class="category-card">
            <h5>{{ item.title }}</h5>
            <p>{{ item.description|default:"No description available"|truncatewords:18 }}</p>
            <a href="{{ item.url }}" target="_blank" class="btn-main">Read Full Story</a>
        </div>
    </div>
    {% endfor %}

</div>
{% endif %}

<style>
/*** SEARCH BAR ***/
.search-form {
    display:flex;
    justify-content:center;
    margin:20px 0 30px;
}
.search-input {
    width:50%;
    padding:12px 15px;
    font-size:16px;
    border-radius:30px 0 0 30px;
    border:2px solid #007bff;
}
.search-btn {
    background:#007bff;
    color:#fff;
    border:none;
    padding:12px 20px;
    border-radius:0 30px 30px 0;
    cursor:pointer;
    font-weight:bold;
}
.search-btn:hover {
    background:#0056b3;
}

/*** HERO SECTION ***/
.hero-section {
    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
                url('https://images.unsplash.com/photo-1522199710521-72d69614c702');
    background-size:cover;
    background-position:center;
    color:white;
    text-align:center;
    padding:80px 20px;
    border-radius:12px;
    margin-bottom:40px;
}
.hero-section h1 {
    font-size:42px;
    font-weight:bold;
}

/*** CATEGORY CARDS ***/
.category-card {
    background:white;
    padding:20px;
    border-radius:12px;
    box-shadow:0 3px 10px rgba(0,0,0,0.1);
    transition:0.3s;
}
.category-card:hover {
    background:#007bff;
    color:white;
    transform:translateY(-5px);
}
.category-card img {
    width:60px;
    height:60px;
    margin-bottom:10px;
}

/*** NO RESULTS ***/
.no-results {
    text-align:center;
    background:#ffffff;
    padding:40px;
    border-radius:12px;
    margin:30px auto;
    width:70%;
}
.no-results h3 {
    font-size:28px;
    color:#e63946;
}
.btn-main {
    background:#0077ff;
    color:white!important;
    padding:10px 20px;
    border-radius:8px;
    text-decoration:none;
    display:inline-block;
    margin-top:10px;
}
.btn-main:hover {
    background:#005fcc;
}
</style>

{% endblock %}

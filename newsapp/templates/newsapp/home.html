{% extends "newsapp/base.html" %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/home.css' %}">

<!-- üîç SEARCH BAR -->
<form method="get" action="" class="search-form">
    <input type="text" name="q" value="{{ search_query }}" class="search-input"
           placeholder="Search news headlines, technology, sports etc... üîç">
    <button type="submit" class="search-btn">Search</button>
</form>

<!-- ‚ùå No Results Found -->
{% if search_query and articles.paginator.count == 0 and api_news|length == 0 %}
<div class="no-results">
    <h3>üîç No Results Found</h3>
    <p>We couldn‚Äôt find anything for <strong>"{{ search_query }}"</strong>.</p>
    <a href="/" class="btn-main">Go Back Home</a>
</div>
{% endif %}

<!-- üì∞ HERO SECTION -->
<div class="hero-section">
    <h1>üì∞ Welcome to Yinhla Yerhu News App</h1>
    <p>Stay informed with trusted news worldwide in real time.</p>
    <a href="{% url 'all_news' %}" class="btn-main">Explore Latest News</a>
</div>

<!-- üîç SEARCH RESULTS SECTION -->
{% if search_query %}
<h3 class="mt-4">Search Results for: "{{ search_query }}"</h3>
<div class="row mt-3">

    <!-- Results From DB -->
    {% for article in articles %}
    <div class="col-md-4 mb-4">
        <div class="category-card">
            <h5>{{ article.title }}</h5>
            <p>{{ article.content|truncatewords:18 }}</p>
            <a href="{% url 'article_detail' article.id %}" class="btn-main">Read More</a>
        </div>
    </div>
    {% endfor %}

    <!-- Results from API News -->
    {% for item in api_news %}
    <div class="col-md-4 mb-4">
        <div class="category-card">
            <h5>{{ item.title }}</h5>
            <p>{{ item.description|default:"No description available"|truncatewords:18 }}</p>
            <a href="{{ item.url }}" target="_blank" class="btn-main">Read Full Story</a>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% endblock %}
